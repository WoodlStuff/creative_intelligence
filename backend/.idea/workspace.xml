<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="0de3b2e8-717e-4878-a5ab-aa4f0cfab6b3" name="Changes" comment="added status=failed&#10;added more details around all LLM requests, so we have a start and end state for each that can be reported on;&#10;added basic report sql for each request type">
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/main/java/com/noi/models/DbImage.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/com/noi/models/DbImage.java" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/src/main/java/com/noi/models/DbMedia.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/com/noi/models/DbMedia.java" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="ExternalProjectsData">
    <projectState path="$PROJECT_DIR$">
      <ProjectState />
    </projectState>
  </component>
  <component name="ExternalProjectsManager">
    <system id="GRADLE">
      <state>
        <task path="$PROJECT_DIR$">
          <activation />
        </task>
        <projects_view>
          <tree_state>
            <expand>
              <path>
                <item name="" type="6a2764b6:ExternalProjectsStructure$RootNode" />
                <item name="backend" type="f1a62948:ProjectNode" />
              </path>
              <path>
                <item name="" type="6a2764b6:ExternalProjectsStructure$RootNode" />
                <item name="backend" type="f1a62948:ProjectNode" />
                <item name="Tasks" type="e4a08cd1:TasksNode" />
              </path>
              <path>
                <item name="" type="6a2764b6:ExternalProjectsStructure$RootNode" />
                <item name="backend" type="f1a62948:ProjectNode" />
                <item name="Tasks" type="e4a08cd1:TasksNode" />
                <item name="build" type="c8890929:TasksNode$1" />
              </path>
            </expand>
            <select />
          </tree_state>
        </projects_view>
      </state>
    </system>
  </component>
  <component name="FileTemplateManagerImpl">
    <option name="RECENT_TEMPLATES">
      <list>
        <option value="Class" />
      </list>
    </option>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$/.." />
  </component>
  <component name="HighlightingSettingsPerFile">
    <setting file="jar://$USER_HOME$/.gradle/caches/modules-2/files-2.1/javax.servlet/javax.servlet-api/3.1.0/3cd63d075497751784b2fa84be59432f4905bf7c/javax.servlet-api-3.1.0.jar!/javax/servlet/http/HttpServletResponse.class" root0="SKIP_INSPECTION" />
    <setting file="jar://$USER_HOME$/Library/Java/JavaVirtualMachines/openjdk-18.0.1.1/Contents/Home/lib/src.zip!/java.base/java/io/FileInputStream.java" root0="SKIP_INSPECTION" />
  </component>
  <component name="MarkdownSettingsMigration">
    <option name="stateVersion" value="1" />
  </component>
  <component name="ProjectId" id="2hhd3ItZNxd1hV7mrnXtlgRZvqU" />
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "RunOnceActivity.OpenProjectViewOnStart": "true",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "SHARE_PROJECT_CONFIGURATION_FILES": "true",
    "project.structure.last.edited": "Libraries",
    "project.structure.proportion": "0.0",
    "project.structure.side.proportion": "0.0"
  }
}]]></component>
  <component name="RecentsManager">
    <key name="CreateClassDialog.RecentsKey">
      <recent name="com.noi.video.scenes" />
      <recent name="com.noi.video.audio" />
      <recent name="com.noi.llm" />
      <recent name="com.noi.llm.midjourney" />
      <recent name="com.noi.llm.openai" />
    </key>
    <key name="MoveMembersDialog.RECENTS_KEY">
      <recent name="com.noi.video.scenes.VideoService" />
      <recent name="com.noi.video.scenes.ORBService" />
      <recent name="com.noi.llm.LLMService" />
      <recent name="com.noi.image.label.LabelService" />
      <recent name="com.noi.embeddings.VectorService" />
    </key>
    <key name="MoveClassesOrPackagesDialog.RECENTS_KEY">
      <recent name="com.noi.language" />
    </key>
    <key name="CopyClassDialog.RECENTS_KEY">
      <recent name="com.noi.embeddings" />
    </key>
  </component>
  <component name="RunManager" selected="Gradle.backend [war]">
    <configuration name="VideoServlet" type="Application" factoryName="Application" temporary="true" nameIsGenerated="true">
      <option name="MAIN_CLASS_NAME" value="com.noi.video.VideoServlet" />
      <module name="backend.main" />
      <extension name="coverage">
        <pattern>
          <option name="PATTERN" value="com.noi.video.*" />
          <option name="ENABLED" value="true" />
        </pattern>
      </extension>
      <method v="2">
        <option name="Make" enabled="true" />
      </method>
    </configuration>
    <configuration name="backend [war]" type="GradleRunConfiguration" factoryName="Gradle" temporary="true">
      <ExternalSystemSettings>
        <option name="executionName" />
        <option name="externalProjectPath" value="$PROJECT_DIR$" />
        <option name="externalSystemIdString" value="GRADLE" />
        <option name="scriptParameters" />
        <option name="taskDescriptions">
          <list />
        </option>
        <option name="taskNames">
          <list>
            <option value="war" />
          </list>
        </option>
        <option name="vmOptions" />
      </ExternalSystemSettings>
      <ExternalSystemDebugServerProcess>true</ExternalSystemDebugServerProcess>
      <ExternalSystemReattachDebugProcess>true</ExternalSystemReattachDebugProcess>
      <DebugAllEnabled>false</DebugAllEnabled>
      <method v="2" />
    </configuration>
    <configuration default="true" type="Remote">
      <option name="USE_SOCKET_TRANSPORT" value="true" />
      <option name="SERVER_MODE" value="false" />
      <option name="SHMEM_ADDRESS" value="javadebug" />
      <option name="HOST" value="localhost" />
      <option name="PORT" value="5005" />
      <option name="AUTO_RESTART" value="false" />
      <method v="2" />
    </configuration>
    <recent_temporary>
      <list>
        <item itemvalue="Gradle.backend [war]" />
        <item itemvalue="Application.VideoServlet" />
      </list>
    </recent_temporary>
  </component>
  <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="0de3b2e8-717e-4878-a5ab-aa4f0cfab6b3" name="Changes" comment="" />
      <created>1718050042395</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1718050042395</updated>
    </task>
    <task id="LOCAL-00001" summary="added some resiliency for unexpected errors during image processing (don't stop all processing, if only one image fails!)&#10;switched to only label the images that were used to generate the video summary (when a &quot;label all images&quot; is requested for a video)">
      <created>1719778008823</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1719778008823</updated>
    </task>
    <task id="LOCAL-00002" summary="added a section of video-images that feature a category (and key and value) to the video label data response ( ...so we can present what category is most present across the scenes of a video)">
      <created>1720447155029</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1720447155029</updated>
    </task>
    <task id="LOCAL-00003" summary="added a &quot;most frequent labels/categories across the images of a video&quot; query">
      <created>1720447186363</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1720447186363</updated>
    </task>
    <task id="LOCAL-00004" summary="fixed order by for images">
      <created>1720448879459</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1720448879459</updated>
    </task>
    <task id="LOCAL-00005" summary="fixe json names (_ vs -);&#10;added similar images to the Image page (using vector similarity);&#10;added CORS headers;">
      <created>1720540723147</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1720540723147</updated>
    </task>
    <task id="LOCAL-00006" summary="added a brand concept to videos and images">
      <created>1720642567802</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1720642567802</updated>
    </task>
    <task id="LOCAL-00007" summary="split out video processing into two steps: ORB scene changes, and LLM scene changes (plus other LLM calls for video and sound summary)">
      <created>1720723513750</created>
      <option name="number" value="00007" />
      <option name="presentableId" value="LOCAL-00007" />
      <option name="project" value="LOCAL" />
      <updated>1720723513750</updated>
    </task>
    <task id="LOCAL-00008" summary="small fix for gender db column size; &#10;fix for single image label request">
      <created>1720730672171</created>
      <option name="number" value="00008" />
      <option name="presentableId" value="LOCAL-00008" />
      <option name="project" value="LOCAL" />
      <updated>1720730672171</updated>
    </task>
    <task id="LOCAL-00009" summary="link the video and brand id automatically when we create images in the process of analyzing a video;">
      <created>1720734328937</created>
      <option name="number" value="00009" />
      <option name="presentableId" value="LOCAL-00009" />
      <option name="project" value="LOCAL" />
      <updated>1720734328937</updated>
    </task>
    <task id="LOCAL-00010" summary="added video score params to similarity requests and UI to allow to change them in the UI; &#10;added separation of ORB and LLM calls so we can 'tune' the ORB scene changes before we call the LLM for scene change detection;&#10;added filter option to Image dialog to allow filtering of the label data in that dialog">
      <created>1721062584834</created>
      <option name="number" value="00010" />
      <option name="presentableId" value="LOCAL-00010" />
      <option name="project" value="LOCAL" />
      <updated>1721062584834</updated>
    </task>
    <task id="LOCAL-00011" summary="added call to vector service for category request (so we can determine if the image already has a vector for this category);">
      <created>1721077238352</created>
      <option name="number" value="00011" />
      <option name="presentableId" value="LOCAL-00011" />
      <option name="project" value="LOCAL" />
      <updated>1721077238352</updated>
    </task>
    <task id="LOCAL-00012" summary="added model as a relationship of the prompt; &#10;added a name to prompts so they can more easily be managed; &#10;improved data for Prompt dialog (added lookup tables for models, statuses, and types);">
      <created>1721169548700</created>
      <option name="number" value="00012" />
      <option name="presentableId" value="LOCAL-00012" />
      <option name="project" value="LOCAL" />
      <updated>1721169548700</updated>
    </task>
    <task id="LOCAL-00013" summary="added a prompt select for Image Label process (select all or one specific prompt to create labels for the image with);">
      <created>1721173514177</created>
      <option name="number" value="00013" />
      <option name="presentableId" value="LOCAL-00013" />
      <option name="project" value="LOCAL" />
      <updated>1721173514177</updated>
    </task>
    <task id="LOCAL-00014" summary="added a name property to videos; &#10;added functionality to add a new brand; &#10;moved video backend to separated endpoint (from shared /api endpoint);&#10;some code cleanup; &#10;added delete for videos; &#10;added video upload">
      <created>1721335693259</created>
      <option name="number" value="00014" />
      <option name="presentableId" value="LOCAL-00014" />
      <option name="project" value="LOCAL" />
      <updated>1721335693259</updated>
    </task>
    <task id="LOCAL-00015" summary="added prompt filter to label requests (get and post), so that we can only show labels produced by that prompt&#10;limit returned labels to only the most recent ones per prompt;">
      <created>1721751541460</created>
      <option name="number" value="00015" />
      <option name="presentableId" value="LOCAL-00015" />
      <option name="project" value="LOCAL" />
      <updated>1721751541460</updated>
    </task>
    <task id="LOCAL-00016" summary="added more label types to GoogleVision requests">
      <created>1721765316573</created>
      <option name="number" value="00016" />
      <option name="presentableId" value="LOCAL-00016" />
      <option name="project" value="LOCAL" />
      <updated>1721765316573</updated>
    </task>
    <task id="LOCAL-00017" summary="small fix: re-use the image we already read.">
      <created>1721772695973</created>
      <option name="number" value="00017" />
      <option name="presentableId" value="LOCAL-00017" />
      <option name="project" value="LOCAL" />
      <updated>1721772695973</updated>
    </task>
    <task id="LOCAL-00018" summary="added a name to images; &#10;removed hard coded file root folder for images and videos; &#10;added an ImageUpload Page, and the backend for it;">
      <created>1721956592843</created>
      <option name="number" value="00018" />
      <option name="presentableId" value="LOCAL-00018" />
      <option name="project" value="LOCAL" />
      <updated>1721956592843</updated>
    </task>
    <task id="LOCAL-00019" summary="added new prompt type for label collapse (consolidate label meta data values); &#10;minor refactors / renames">
      <created>1722359215745</created>
      <option name="number" value="00019" />
      <option name="presentableId" value="LOCAL-00019" />
      <option name="project" value="LOCAL" />
      <updated>1722359215745</updated>
    </task>
    <task id="LOCAL-00020" summary="better json error handling">
      <created>1722364311929</created>
      <option name="number" value="00020" />
      <option name="presentableId" value="LOCAL-00020" />
      <option name="project" value="LOCAL" />
      <updated>1722364311929</updated>
    </task>
    <task id="LOCAL-00021" summary="the model is now tied to a 'service name', allowing th select the code to run, baed on the model; &#10;propmts are now tied to a model, allowing to pick the model based on the prompt.&#10;re-implemented the LLM calling code in py to java server, to streamline calling LLMs; &#10;started the concept of a central LLMService (work to be done to move the individual services such as LabelService to this new concept...) ;">
      <created>1722617134626</created>
      <option name="number" value="00021" />
      <option name="presentableId" value="LOCAL-00021" />
      <option name="project" value="LOCAL" />
      <updated>1722617134626</updated>
    </task>
    <task id="LOCAL-00022" summary="call audio extraction script as part of the ORB scene detection call (so we generate the mp3 file for future LLM calls)">
      <created>1722617242716</created>
      <option name="number" value="00022" />
      <option name="presentableId" value="LOCAL-00022" />
      <option name="project" value="LOCAL" />
      <updated>1722617242716</updated>
    </task>
    <task id="LOCAL-00023" summary="improved name handling for video uploads">
      <created>1722617299591</created>
      <option name="number" value="00023" />
      <option name="presentableId" value="LOCAL-00023" />
      <option name="project" value="LOCAL" />
      <updated>1722617299591</updated>
    </task>
    <task id="LOCAL-00024" summary="replaced call to py code (for video LLM processing) with new java server replacement">
      <created>1722617343101</created>
      <option name="number" value="00024" />
      <option name="presentableId" value="LOCAL-00024" />
      <option name="project" value="LOCAL" />
      <updated>1722617343101</updated>
    </task>
    <task id="LOCAL-00025" summary="cosmetics in deprecated py code">
      <created>1722617379632</created>
      <option name="number" value="00025" />
      <option name="presentableId" value="LOCAL-00025" />
      <option name="project" value="LOCAL" />
      <updated>1722617379632</updated>
    </task>
    <task id="LOCAL-00026" summary="fixed sound file url creation (to read for transcript); small other fixes">
      <created>1722695825767</created>
      <option name="number" value="00026" />
      <option name="presentableId" value="LOCAL-00026" />
      <option name="project" value="LOCAL" />
      <updated>1722695825767</updated>
    </task>
    <task id="LOCAL-00027" summary="added Label button to the Story page (to label all images used in the video summary)">
      <created>1722695898633</created>
      <option name="number" value="00027" />
      <option name="presentableId" value="LOCAL-00027" />
      <option name="project" value="LOCAL" />
      <updated>1722695898633</updated>
    </task>
    <task id="LOCAL-00028" summary="added OrbServlet to proxy requests to the ORB python script (for now), allowing us to have one main endpoint for the webapp to call (in prep for auth handling)">
      <created>1722723489136</created>
      <option name="number" value="00028" />
      <option name="presentableId" value="LOCAL-00028" />
      <option name="project" value="LOCAL" />
      <updated>1722723489136</updated>
    </task>
    <task id="LOCAL-00029" summary="changed ORB call URL to streamline endpoints to be called by the webapp; now all remote endpoints are on the same server URL and port">
      <created>1722723624193</created>
      <option name="number" value="00029" />
      <option name="presentableId" value="LOCAL-00029" />
      <option name="project" value="LOCAL" />
      <updated>1722723624193</updated>
    </task>
    <task id="LOCAL-00030" summary="removed dependency on the frontend to proxy orb results thtough to the backend. now we call the orb directly from the backend and process the results before we return the json to the frontend. &#10;ORB prams are now persisted and brought back to the frontend (so it's clear what params were used to create the current scores)">
      <created>1722883336928</created>
      <option name="number" value="00030" />
      <option name="presentableId" value="LOCAL-00030" />
      <option name="project" value="LOCAL" />
      <updated>1722883336928</updated>
    </task>
    <task id="LOCAL-00031" summary="more cleanup around video processing and ingteractions with the front end">
      <created>1722908212364</created>
      <option name="number" value="00031" />
      <option name="presentableId" value="LOCAL-00031" />
      <option name="project" value="LOCAL" />
      <updated>1722908212364</updated>
    </task>
    <task id="LOCAL-00032" summary="added status=failed&#10;added more details around all LLM requests, so we have a start and end state for each that can be reported on;&#10;added basic report sql for each request type">
      <created>1722982897471</created>
      <option name="number" value="00032" />
      <option name="presentableId" value="LOCAL-00032" />
      <option name="project" value="LOCAL" />
      <updated>1722982897471</updated>
    </task>
    <option name="localTasksCounter" value="33" />
    <servers />
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="small fix for gender db column size; &#10;fix for single image label request" />
    <MESSAGE value="link the video and brand id automatically when we create images in the process of analyzing a video;" />
    <MESSAGE value="added video score params to similarity requests and UI to allow to change them in the UI; &#10;added separation of ORB and LLM calls so we can 'tune' the ORB scene changes before we call the LLM for scene change detection;&#10;added filter option to Image dialog to allow filtering of the label data in that dialog" />
    <MESSAGE value="added call to vector service for category request (so we can determine if the image already has a vector for this category);" />
    <MESSAGE value="added model as a relationship of the prompt; &#10;added a name to prompts so they can more easily be managed; &#10;improved data for Prompt dialog (added lookup tables for models, statuses, and types);" />
    <MESSAGE value="added a prompt select for Image Label process (select all or one specific prompt to create labels for the image with);" />
    <MESSAGE value="added a name property to videos; &#10;added functionality to add a new brand; &#10;moved video backend to separated endpoint (from shared /api endpoint);&#10;some code cleanup; &#10;added delete for videos; &#10;added video upload" />
    <MESSAGE value="added prompt filter to label requests (get and post), so that we can only show labels produced by that prompt&#10;limit returned labels to only the most recent ones per prompt;" />
    <MESSAGE value="added more label types to GoogleVision requests" />
    <MESSAGE value="small fix: re-use the image we already read." />
    <MESSAGE value="added a name to images; &#10;removed hard coded file root folder for images and videos; &#10;added an ImageUpload Page, and the backend for it;" />
    <MESSAGE value="added new prompt type for label collapse (consolidate label meta data values); &#10;minor refactors / renames" />
    <MESSAGE value="better json error handling" />
    <MESSAGE value="the model is now tied to a 'service name', allowing th select the code to run, baed on the model; &#10;propmts are now tied to a model, allowing to pick the model based on the prompt.&#10;re-implemented the LLM calling code in py to java server, to streamline calling LLMs; &#10;started the concept of a central LLMService (work to be done to move the individual services such as LabelService to this new concept...) ;" />
    <MESSAGE value="call audio extraction script as part of the ORB scene detection call (so we generate the mp3 file for future LLM calls)" />
    <MESSAGE value="improved name handling for video uploads" />
    <MESSAGE value="replaced call to py code (for video LLM processing) with new java server replacement" />
    <MESSAGE value="cosmetics in deprecated py code" />
    <MESSAGE value="fixed sound file url creation (to read for transcript); small other fixes" />
    <MESSAGE value="added Label button to the Story page (to label all images used in the video summary)" />
    <MESSAGE value="added OrbServlet to proxy requests to the ORB python script (for now), allowing us to have one main endpoint for the webapp to call (in prep for auth handling)" />
    <MESSAGE value="changed ORB call URL to streamline endpoints to be called by the webapp; now all remote endpoints are on the same server URL and port" />
    <MESSAGE value="removed dependency on the frontend to proxy orb results thtough to the backend. now we call the orb directly from the backend and process the results before we return the json to the frontend. &#10;ORB prams are now persisted and brought back to the frontend (so it's clear what params were used to create the current scores)" />
    <MESSAGE value="more cleanup around video processing and ingteractions with the front end" />
    <MESSAGE value="added status=failed&#10;added more details around all LLM requests, so we have a start and end state for each that can be reported on;&#10;added basic report sql for each request type" />
    <option name="LAST_COMMIT_MESSAGE" value="added status=failed&#10;added more details around all LLM requests, so we have a start and end state for each that can be reported on;&#10;added basic report sql for each request type" />
  </component>
  <component name="XDebuggerManager">
    <breakpoint-manager>
      <breakpoints>
        <line-breakpoint enabled="true" type="java-line">
          <url>file://$PROJECT_DIR$/src/main/java/com/noi/video/VideoServlet.java</url>
          <line>662</line>
          <option name="timeStamp" value="2" />
        </line-breakpoint>
        <line-breakpoint enabled="true" type="java-line">
          <url>file://$PROJECT_DIR$/src/main/java/com/noi/video/VideoServlet.java</url>
          <line>657</line>
          <option name="timeStamp" value="4" />
        </line-breakpoint>
        <line-breakpoint enabled="true" type="java-line">
          <url>file://$PROJECT_DIR$/src/main/java/com/noi/video/VideoServlet.java</url>
          <line>639</line>
          <option name="timeStamp" value="5" />
        </line-breakpoint>
      </breakpoints>
    </breakpoint-manager>
  </component>
</project>